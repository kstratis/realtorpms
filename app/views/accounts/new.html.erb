<% provide(:title, t('accounts.signup_title')) %>

<% content_for :heading do %>
  <div>
    <p> <%= t('sessions.existing_account') %> <%= link_to t('sessions.sign_in_now'), login_url(subdomain: false) %></p>
  </div>
<% end %>

<% content_for :content do %>

  <%= form_for(@account, html: {class: 'auth-form'}) do |account_builder| %>
    <%#= render 'shared/error_messages', locals: {model: @account} %>

    <div class="form-group">
      <div class="input-group input-group-alt">
        <%= account_builder.text_field :subdomain, class: 'form-control prepended-label-fix', placeholder: Account.human_attribute_name("subdomain") %>
        <div class="input-group-append">
          <span class="input-group-text">.<%= BRANDNAME.downcase %>.com</span>
        </div>
      </div><!-- /.input-group -->
      <%= inline_error @account, :subdomain, 'Subdomain' %>
    </div><!-- /.form-group -->

    <div class="form-group">
      <div class="form-label-group">
        <%= account_builder.text_field :name, class: 'form-control', placeholder: Account.human_attribute_name("name") %>
        <%= account_builder.label :name, Account.human_attribute_name("name") %>
        <%= inline_error @account, :name, 'Name' %>
      </div><!-- /.input-group -->

    </div><!-- /.form-group -->

    <div class="form-group">
      <div class="form-label-group">
        <%= account_builder.select "flavor",
                                   Account.flavors.keys.collect { |flavor| [ Account.human_enum_name(:flavor, flavor), flavor ] },
                                   { selected:  params[:locale] == 'el' ? :greek : :international },
                                   { class: 'custom-select' } %>

        <%= account_builder.label "flavor", Account.human_attribute_name("flavor") %>
      </div><!-- /.input-group -->
    </div><!-- /.form-group -->

    <div><small class="form-text flavor-warning"><%= t('sessions.flavor_warning') %></small></div>

    <hr />

    <%# This is for the nested user fields %>
    <%= account_builder.fields_for :owner do |owner| %>

      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.text_field :first_name, class: 'form-control', placeholder: User.human_attribute_name("first_name_admin") %>
          <%= owner.label :first_name, User.human_attribute_name("first_name_admin") %>
          <%= inline_error @account.owner, :first_name, 'First name' %>
        </div>
      </div>
      <!-- /.form-group -->


      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.text_field :last_name, class: 'form-control', placeholder: User.human_attribute_name("last_name_admin") %>
          <%= owner.label :last_name, User.human_attribute_name("last_name_admin") %>
          <%= inline_error @account.owner, :last_name, 'Last name' %>
        </div>
      </div>
      <!-- /.form-group -->


      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.email_field :email, class: 'form-control', placeholder: User.human_attribute_name("email_admin") %>
          <%= owner.label "email", User.human_attribute_name("email_admin") %>
          <%= inline_error @account.owner, :email, 'Email' %>
        </div>
      </div>
      <!-- /.form-group -->

      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.select "locale",
                           User.locales.keys.collect { |locale| [ User.human_enum_name(:locale, locale), locale ] },
                           { selected:  params[:locale] },
                           { class: 'custom-select' } %>

          <%= owner.label "locale", User.human_attribute_name("locale") %>
          <%= inline_error @account.owner, :locale, 'Locale' %>
        </div>
      </div>
      <!-- /.form-group -->

      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.password_field :password, class: 'form-control', placeholder: User.human_attribute_name("password") %>
          <%= owner.label :password, User.human_attribute_name("password") %>
          <%= inline_error @account.owner, :password, 'Password' %>
        </div>
      </div>
      <!-- /.form-group -->

      <!-- .form-group -->
      <div class="form-group">
        <div class="form-label-group">
          <%= owner.password_field :password_confirmation, class: 'form-control', placeholder: User.human_attribute_name("password_confirmation") %>
          <%= owner.label :password_confirmation, User.human_attribute_name("password_confirmation") %>
          <%= inline_error @account.owner, :password_confirmation, 'Password confirmation' %>
        </div>
      </div>
      <!-- /.form-group -->

    <% end %>

    <%= account_builder.submit t('accounts.signup_button'), class: 'btn btn-primary' %>

  <% end %>

<% end %>
