<% provide(:title, t('properties.new.heading')) %>

<%= render partial: 'shared/breadcrumb', locals: {title: 'properties.new.heading', icon: 'house-colored'} %>

<div class="page-container">
  <div class="form-container">

    <%#= render partial: 'shared/header_strip', locals: {title: 'properties.new.heading', icon: 'house-colored'} %>
    <%= form_for(@property, remote: true) do |property| %>

      <div class="container">
        <div class="app-container">
          <div id="smartwizard">
            <ul>
              <li><a href="#step-1"><%= t('js.components.wizard.stepper.one_title') %><br/>
                <small><%= t('js.components.wizard.stepper.one_desc') %></small>
              </a></li>
              <li><a href="#step-2"><%= t('js.components.wizard.stepper.two_title') %><br/>
                <small><%= t('js.components.wizard.stepper.two_desc') %></small>
              </a></li>
              <li><a href="#step-3"><%= t('js.components.wizard.stepper.three_title') %><br/>
                <small><%= t('js.components.wizard.stepper.three_desc') %></small>
              </a></li>
              <li><a href="#step-4"><%= t('js.components.wizard.stepper.fourth_title') %><br/>
                <small><%= t('js.components.wizard.stepper.fourth_desc') %></small>
              </a></li>
              <li><a href="#step-5"><%= t('js.components.wizard.stepper.fifth_title') %><br/>
                <small><%= t('js.components.wizard.stepper.fifth_desc') %></small>
              </a></li>
            </ul>

            <div> <!-- start of steps -->
              <div id="step-1" class="">
                <div class="row ">
                  <div class="col-md-4 col-sm-12">
                    <div class="form-group">
                      <%= property.label :businesstype do %>
                        <%= Property.human_attribute_name(:businesstype) %>
                        <abbr title="<%= t('js.components.select.required') %>">*</abbr>
                      <% end %>
                      <%= react_component('SimpleSelect', props: {
                          id: 'a',
                          inputID: 'property_businesstype',
                          inputName: 'property[businesstype]',
                          formID: 'new_property',
                          className: 'simple-select',
                          options: Property.businesstypes.keys.collect {|businesstype| {label: Property.human_enum_name(:businesstype, businesstype), value: businesstype}},
                          soloMode: true,
                          ajaxEnabled: false,
                          searchable: false,
                          i18n: {
                              select: t('js.components.select'),
                          }
                      }, prerender: false) %>
                    </div>

                    <!-- DependantSelect will generate the form-group div and label tags automatically (it's nested) -->
                    <%= react_component('DependantSelect', props: {
                        id: 'b',
                        className: 'simple-select-container',
                        options: get_options,
                        searchable: false,
                        formdata: {
                            formid: 'new_property',
                            categoryid: 'property_category',
                            categoryname: 'property[category]',
                            subcategoryid: 'property_subcategory',
                            subcategoryname: 'property[subcategory]',
                        },
                        i18n: {
                            select: t('js.components.select'),
                        }
                    }, prerender: false) %>

                    <!-- This guards against unwanted ujs form submission -->
                    <input id="preventformsubmit" type="hidden">
<!--                    <input id="property_images" class="emitters form-control" type="hidden" name="property[images][]">-->
                    <!-- This makes the current locale available in javascript -->
                    <%= render "accounts/helpers/locale" %>
                    <%= content_tag :div, class: "", id: "jqvalidator", data: {
                        i18n: {
                            jqvalidator: t('js.jqvalidator'),
                        }
                    } do %>
                    <% end %>
                    <%= content_tag :div, class: "", id: "swal", data: {
                        i18n: {
                            swal: t('js.swal'),
                        }
                    } do %>
                    <% end %>



                  </div>
                  <div class="col-md-8">
                    <div class="d-flex justify-content-center opaque">
                      <i class="pr-icon xl house-add"></i>
                    </div>


                  </div>

                </div>
              </div>
              <div id="step-2" class="">
                <div class="row ">
                  <div class="col-md-4 col-sm-12">
                    <div class="form-group">
                      <div class="form-group">
                        <%= property.label :location do %>
                          <%= content_tag(:i, nil, class: 'fas fa-map fa-fw') + ' ' + t('activerecord.attributes.property.location') %>
                          <abbr title="<%= t('js.components.select.required') %>">*</abbr>
                        <% end %>
                        <%= react_component('SimpleSelect', props: {
                            id: 'c',
                            inputID: 'property_locationid',
                            inputName: 'property[locationid]',
                            formID: 'new_property',
                            className: 'simple-select',
                            # options: Property.propertytypes.keys.collect { |propertytype| { label: Property.human_enum_name(:propertytype, propertytype), value: propertytype} },
                            # options: (1940..Time.zone.now.year + 2).collect {|year| {label: year, value: year}},
                            searchable: true,
                            soloMode: true,
                            ajaxEnabled: true,
                            i18n: {
                                select: t('js.components.select'),
                            }
                        }, prerender: false) %>
                      </div>

                      <div class="form-group">
                        <%= property.label :address do %>
                          <%= content_tag :span do %>
                            <%= content_tag(:i, nil, class: 'fas fa-map-marker-alt fa-fw') + ' ' + t('activerecord.attributes.property.address') %>
                          <% end %>
                        <% end %>
                        <%= property.text_field :address, placeholder: Property.human_attribute_name("address_placeholder"), class: 'glowing-border' %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div id="step-3" class="">
                Step Content
              </div>
              <div id="step-4" class="">
                Step Content
              </div>
              <div id="step-5" class="">
                Step Content
              </div>
            </div> <!-- end of steps-->


          </div> <!-- end of wizard-->
        </div>
      </div>
      <div class="form-group">
        <%= property.submit t('properties.new.add_button'), class: 'btn btn-primary' %>
        <%#= property.submit t('properties.new.add_button'), class: 'btn btn-primary', data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Creating property..."} %>
      </div>
    <% end %>

  </div>

</div>





