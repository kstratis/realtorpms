<!DOCTYPE html>
<html lang="<%= I18n.locale.to_s %>">
<head>
  <meta http-equiv="X-UA-Compatible"
        content="IE=edge">

  <meta name="format-detection"
        content="telephone=no">

  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'
        name='viewport'/>

  <meta name="apple-mobile-web-app-capable"
        content="yes">

  <meta name='description' content='<%= t('meta.description', subdomain: current_account.subdomain) %>'>

  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="<%= asset_pack_path('media/images/favicon/apple-touch-icon.png') %>">
  <link rel="icon" type="image/png" sizes="32x32" href="<%= asset_pack_path('media/images/favicon/favicon-32x32.png') %>">
  <link rel="icon" type="image/png" sizes="16x16" href="<%= asset_pack_path('media/images/favicon/favicon-16x16.png') %>">
  <link rel="mask-icon" href="<%= asset_pack_path('media/images/favicon/safari-pinned-tab.svg') %>" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <!-- favicon end -->

  <!-- full_title is defined in app/helpers/application_helper.rb. title is provided by each view file
       using the keyword 'provide' If the view file doesn't provide such value, 'full title' returns
       a generic title -->
  <title><%= full_title(yield(:title)) %></title>
  <%= csrf_meta_tags %>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

<!--  <link rel="preconnect" href="https://fonts.googleapis.com">-->
<!--  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>-->
<!--  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">-->

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

<!--  Order matters here. Don't change the order. external_stylesheets are basically the styles for flatpickr and -->
<!--  uppy.js. We need to load them first. -->
  <%= stylesheet_pack_tag 'style_loaders/external_stylesheets', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= stylesheet_pack_tag 'style_loaders/main_stylesheet', media: 'all', 'data-turbolinks-track': 'reload' %>

  <%#= render 'layouts/shared_script_assets' %>
  <%#= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  <%= javascript_packs_with_chunks_tag 'components-bundle',
                                       'application',
                                       'theme',
                                       'datepicker_localization',
                                       'date_select',
                                       'avatar_preview',
                                       'printable',
                                       'tabs',
                                       'custom_fields',
                                       'stepper',
                                       'validator',
                                       'script_loader',
                                       'automatedClicks',
                                       'data-turbolinks-track': 'reload' %>

  <% if Rails.env.production? %>
    <script data-token="AOX6ILZTEIVP" async src="https://cdn.splitbee.io/sb.js"></script>
  <% end %>

  <%= render 'layouts/shim' %>
</head>
<body class="d-flex flex-column min-vh-100">

<!-- .app -->
<div class="app">

  <%= render 'layouts/flash_messages' %>

  <%= render 'layouts/header' %>

  <%= render 'layouts/aside' %>

  <!-- This is placed here so js can pick it up -->
  <%= render 'layouts/routes' %>

  <!-- .app-main -->
  <main class="app-main">
    <!-- .wrapper -->
    <div class="wrapper">
      <!-- your awesome app content goes here -->

      <div id="page-transition">
        <!-- This enables nested layouts-->
        <!-- https://www.joshmcarthur.com/til/2018/03/26/til-nested-layouts-in-rails.html -->
        <%= content_for?(:settings) ? yield(:settings) : yield %>
      </div>
      <%#= render 'layouts/footer' %>
      <%#= debug(params) if Rails.env.development? %>
    </div>
    <!-- /.wrapper -->
  </main>
  <!-- /.app-main -->


  <div id="modal-root"></div>

</div>
<!-- /.app -->
<%= render 'layouts/footer' %>
<%= render "accounts/helpers/locale" %>
<%= render "accounts/helpers/chat" %>
</body>

</html>
